<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khảo sát Thanh Xuân Có Bạn</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="/css/yearpicker.css" rel="stylesheet">
    <script src="/js/yearpicker.js"></script>
    <style>
        .trainee-option {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px;
            text-align: center;
            cursor: pointer;
        }

        .trainee-option img {
            max-width: 100%;
            margin-bottom: 10px;
        }

        .trainee-option.selected {
            border-color: #007bff;
            background-color: #e9f5ff;
        }

        .question {
            margin-bottom: 30px;
        }
    </style>
    <style>
        .rectangle-option {
            width: 50px;
            height: 50px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            text-align: center;
            line-height: 50px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
            font-size: 16px;
        }

        .rectangle-option:hover {
            background-color: #d9edf7;
        }

        .rectangle-option.selected {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .rectangle-option-container {
            gap: 10px;
            display: flex;
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Make something like a sticky note. I want to write lời nhắn tới người làm khảo sát -->
        <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading">Lời nhắn tới người làm khảo sát</h4>
            <p>
                Xin chào! Đây là một mẫu khảo sát về chương trình "Thanh Xuân Có Bạn" mùa 2. Bạn sẽ cần khoảng 5-10
                phút để hoàn thành khảo sát này. Hãy trả lời mọi câu hỏi một cách chân thực nhất có thể. Chúng tôi rất
                trân trọng sự đóng góp của bạn.
            </p>
            <hr>
            <p class="mb-0">
                ...
            </p>
        </div>
        <div class="card">
            <h6 class="card-header">
                Phần A: Khảo sát hoạt động xem chương trình “Thanh Xuân Có Bạn” mùa 2
            </h6>
            <div class="card-body">
                <!-- Câu A1 -->
                <div class="question">
                    <label for="A1" class="form-label">
                        <strong>
                            A1. Lần cuối cùng bạn xem chương trình "Thanh Xuân Có Bạn" mùa 2 một cách đáng kể là vào
                            thời gian nào?
                        </strong>
                    </label>
                    <input type="text" id="A1" name="A1" class="form-control yearpicker" required>
                </div>
                <hr>
                <!-- Câu A2 -->
                <div class="question">
                    <label for="A2" class="form-label">
                        <strong>A2. Lúc đó, bạn đã xem bao nhiêu tập của chương trình?
                        </strong>
                    </label>
                    <div id="A2">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" id="A2_1" name="A2" value="1" required>
                            <label class="form-check-label" for="A2_1">Tất cả các tập (23 hoặc 24)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" id="A2_2" name="A2" value="2" required>
                            <label class="form-check-label" for="A2_2">Hơn một nửa số tập (từ 13 tới 22)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" id="A2_3" name="A2" value="3" required>
                            <label class="form-check-label" for="A2_3">Chưa đầy một nửa số tập (từ 1 tới 11)</label>
                        </div>
                    </div>
                </div>
                <hr>

                <!-- Câu A3 -->
                <div class="question">
                    <label for="A3" class="form-label">
                        <strong>A3. Trong (những) lần bạn xem chương trình, bạn thường xem qua
                            nền tảng
                            nào?</strong>
                    </label>
                    <div id="A3">
                        <div class="form-check">
                            <input class="form-check-input" name="A3" type="radio" value="iQIYI" id="platform1"
                                required>
                            <label class="form-check-label" for="platform1">iQIYI</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" name="A3" type="radio" value="YouTube" id="platform2"
                                required>
                            <label class="form-check-label" for="platform2">Các kênh YouTube chính thức do iQIYI quản
                                lý</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" name="A3" type="radio" value="Other" id="platform3"
                                required>
                            <label class="form-check-label" for="platform3">Các nền tảng khác</label>
                        </div>
                    </div>
                </div>
                <hr>

                <!-- Câu A4: Chọn mức độ tham gia bình chọn -->
                <div class="question">
                    <label for="A4" class="form-label">
                        <strong>A4. Bạn có thường xuyên tham gia vào việc bình chọn cho thực tập
                            sinh
                            không?</strong></label>
                    <div id="A4-options" class="d-flex justify-content-between rectangle-option-container">
                        <div class="rectangle-option" data-value="1">1</div>
                        <div class="rectangle-option" data-value="2">2</div>
                        <div class="rectangle-option" data-value="3">3</div>
                        <div class="rectangle-option" data-value="4">4</div>
                        <div class="rectangle-option" data-value="5">5</div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <strong style="font-size: small;">Không bao giờ</strong>
                        <strong style="font-size: small;">Rất thường xuyên</strong>
                    </div>
                    <br />
                    <div class="alert alert-info" role="alert">
                        <span id="A4-value">Chưa chọn</span>
                    </div>
                </div>
                <hr>


                <!-- Câu A5: Chọn "pick" của bạn -->
                <div class="question">
                    <label for="A5" class="form-label">
                        <strong>A5. Hãy cho biết "pick" của bạn trong chương trình</strong></label>
                    <div id="traineeList" class="row">
                        <!-- Khối option của thực tập sinh sẽ được tạo động trong JavaScript -->
                    </div>
                </div>
                <hr>

                <!-- Câu A6 -->
                <div class="question">
                    <label for="A6" class="form-label">
                        <strong>A6. Điều gì khiến bạn "pick" những thực tập sinh đó? (Chọn tất cả
                        những
                        lý do đúng với bạn)</strong></label>
                    <div id="A6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="1" id="A6_1">
                            <label class="form-check-label" for="reason1">Kỹ năng ca hát</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="2" id="A6_2">
                            <label class="form-check-label" for="reason2">Kỹ năng vũ đạo</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="3" id="A6_3">
                            <label class="form-check-label" for="reason3">Phẩm chất, tính cách</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="4" id="A6_4">
                            <label class="form-check-label" for="reason4">Ngoại hình</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="5" id="A6_5">
                            <label class="form-check-label" for="reason5">Câu chuyện, hành trình nỗ lực</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="6" id="A6_6"
                                onchange="toggleA6Other()">
                            <label class="form-check-label" for="reason6">Khác (Vui lòng ghi rõ dưới đây)</label>
                        </div>
                        <input type="text" class="form-control" id="A6_other" placeholder="Lý do khác" disabled>

                        <script>
                            function toggleA6Other() {
                                const A6_6 = document.getElementById('A6_6');
                                const A6_other = document.getElementById('A6_other');
                                A6_other.disabled = !A6_6.checked;
                            }
                        </script>
                    </div>
                </div>
                <hr>

                <!-- Câu A7 -->
                <div class="question">
                    <label for="A7" class="form-label">
                        <strong>A7. Bạn có thường xuyên thay đổi người bạn "pick" trong chương
                        trình
                        không?</strong></label>
                    <div id="A7-options" class="d-flex justify-content-between rectangle-option-container">
                        <div class="rectangle-option" data-value="1">1</div>
                        <div class="rectangle-option" data-value="2">2</div>
                        <div class="rectangle-option" data-value="3">3</div>
                        <div class="rectangle-option" data-value="4">4</div>
                        <div class="rectangle-option" data-value="5">5</div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <strong style="font-size: small;">Không bao giờ</strong>
                        <strong style="font-size: small;">Rất thường xuyên</strong>
                    </div>
                    <br />
                    <div class="alert alert-info" role="alert">
                        <span id="A7-value">Chưa chọn</span>
                    </div>
                </div>
                <hr>

                <!-- Câu A8 -->
                <div class="question">
                    <label for="A8" class="form-label">A8. Bạn có thường xuyên theo dõi hoạt động của thực tập sinh bên
                        ngoài
                        chương trình không?</label>
                    <div id="A8-options" class="d-flex justify-content-between rectangle-option-container">
                        <div class="rectangle-option" data-value="1">1</div>
                        <div class="rectangle-option" data-value="2">2</div>
                        <div class="rectangle-option" data-value="3">3</div>
                        <div class="rectangle-option" data-value="4">4</div>
                        <div class="rectangle-option" data-value="5">5</div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <strong style="font-size: small;">Không bao giờ</strong>
                        <strong style="font-size: small;">Rất thường xuyên</strong>
                    </div>
                    <br />
                    <div class="alert alert-info" role="alert">
                        <span id="A8-value">Chưa chọn</span>
                    </div>
                </div>
                <hr>

                <!-- Câu A9 -->
                <div class="question">
                    <label for="A9" class="form-label">A9. Bạn có thường xuyên tham gia vào các hoạt động của cộng đồng
                        người
                        hâm mộ không?</label>

                    <div id="A9-options" class="d-flex justify-content-between rectangle-option-container">
                        <div class="rectangle-option" data-value="1">1</div>
                        <div class="rectangle-option" data-value="2">2</div>
                        <div class="rectangle-option" data-value="3">3</div>
                        <div class="rectangle-option" data-value="4">4</div>
                        <div class="rectangle-option" data-value="5">5</div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <strong style="font-size: small;">Không bao giờ</strong>
                        <strong style="font-size: small;">Rất thường xuyên</strong>
                    </div>
                    <br />
                    <div class="alert alert-info" role="alert">
                        <span id="A9-value">Chưa chọn</span>
                    </div>
                </div>
                <hr>

                <!-- Câu A10 -->
                <div class="question">
                    <label for="A10" class="form-label">A10. Mức độ yêu thích chương trình của bạn là bao nhiêu?</label>
                    <div id="A10-options" class="d-flex justify-content-between rectangle-option-container">
                        <div class="rectangle-option" data-value="1">1</div>
                        <div class="rectangle-option" data-value="2">2</div>
                        <div class="rectangle-option" data-value="3">3</div>
                        <div class="rectangle-option" data-value="4">4</div>
                        <div class="rectangle-option" data-value="5">5</div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <strong style="font-size: small;">Không bao giờ</strong>
                        <strong style="font-size: small;">Rất thường xuyên</strong>
                    </div>
                    <br />
                    <div class="alert alert-info" role="alert">
                        <span id="A10-value">Chưa chọn</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Phần B: Thông tin cá nhân -->
        <h3>Phần B: Thông tin cá nhân</h3>

        <!-- Câu B1 -->
        <div class="question">
            <label for="B1" class="form-label">B1. Bạn vui lòng cho biết giới tính của bạn?</label>
            <select id="B1" class="form-select" required>
                <option value="" disabled selected>Chọn giới tính</option>
                <option value="Nam">Nam</option>
                <option value="Nữ">Nữ</option>
                <option value="Khác">Khác</option>
            </select>
        </div>

        <!-- Câu B2 -->
        <div class="question">
            <label for="B2" class="form-label">B2. Bạn bao nhiêu tuổi tại thời điểm bạn đã nêu ở câu A1?</label>
            <input type="number" id="B2" class="form-control" required>
        </div>

        <!-- Câu B3 -->
        <div class="question">
            <label for="B3" class="form-label">B3. Lúc đó, bạn đang làm công việc gì?</label>
            <select id="B3" class="form-select" required>
                <option value="" disabled selected>Chọn công việc</option>
                <option value="1">Học sinh phổ thông</option>
                <option value="2">Học sinh giáo dục nghề nghiệp</option>
                <option value="3">Sinh viên cao đẳng</option>
                <option value="4">Sinh viên đại học</option>
                <option value="5">Học viên cao học</option>
                <option value="6">Nghiên cứu sinh</option>
                <option value="7">Cán bộ, công chức</option>
                <option value="8">Người lao động</option>
                <option value="9">Chủ doanh nghiệp</option>
                <option value="10">Tự do</option>
            </select>
        </div>

        <!-- Câu B4 -->
        <div class="question">
            <label for="B4" class="form-label">B4. Lúc đó, bạn đang sinh sống ở đâu?</label>
            <select id="B4" class="form-select" required>
                <option value="" disabled selected>Chọn khu vực</option>
                <option value="KV1">KV1</option>
                <option value="KV2">KV2</option>
                <option value="KV3">KV3</option>
                <option value="KV2-NT">KV2-NT</option>
                <option value="Ngoài lãnh thổ Việt Nam">Ngoài lãnh thổ Việt Nam</option>
            </select>
        </div>

        <!-- Nút Submit -->
        <button id="submitBtn" class="btn btn-primary mt-4">Hoàn thành khảo sát</button>
    </div>

    <!-- Bootstrap JS & Popper.js -->
    <script>
        let trainees = [];
        const maxSelections = 9;
        let selectedTrainees = [];
        const traineeList = document.getElementById('traineeList');
        fetch('/trainees.json')
            .then(response => response.json())
            .then(data => {
                trainees = data;
                trainees.forEach(trainee => {
                    const col = document.createElement('div');
                    col.classList.add('col-xl-2');
                    col.classList.add('col-md-3');
                    col.classList.add('col-sm-4');
                    col.classList.add('col-6');
                    const traineeDiv = document.createElement('div');
                    traineeDiv.classList.add('trainee-option');
                    traineeDiv.dataset.id = trainee.id;
                    traineeDiv.innerHTML = `
            <img src="${trainee.img}" alt="Hình của ${trainee.vnName}">
            <h6>${trainee.vnName}</h6>
            <small>${trainee.cnName}<br>${trainee.enName}</small>
            <hr>
            <div style="font-size:xx-small">${trainee.enCompany}<br>${trainee.cnCompany ? trainee.cnCompany : ""}</div>
        `;

                    traineeDiv.addEventListener('click', () => selectTrainee(traineeDiv));
                    col.appendChild(traineeDiv);
                    traineeList.appendChild(col);
                });
            });

        function selectTrainee(traineeDiv) {
            const id = traineeDiv.dataset.id;
            if (traineeDiv.classList.contains('selected')) {
                traineeDiv.classList.remove('selected');
                selectedTrainees = selectedTrainees.filter(t => t !== id);
            } else {
                if (selectedTrainees.length < maxSelections) {
                    traineeDiv.classList.add('selected');
                    selectedTrainees.push(id);
                } else {
                    //alert(`Bạn chỉ có thể chọn tối đa ${maxSelections} thực tập sinh.`);
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: `Bạn chỉ có thể chọn tối đa ${maxSelections} thực tập sinh`,
                    })
                }
            }
        }

        function setupRectangleOptions(questionId) {
            const options = document.querySelectorAll(`#${questionId}-options .rectangle-option`);
            const selectedValueDisplay = document.getElementById(`${questionId}-value`);
            let selectedValue = '';

            options.forEach(option => {
                option.addEventListener('click', function () {
                    // Xóa lớp "selected" khỏi tất cả các hình chữ nhật
                    options.forEach(opt => opt.classList.remove('selected'));

                    // Thêm lớp "selected" cho hình chữ nhật được chọn
                    this.classList.add('selected');

                    // Lưu giá trị đã chọn và hiển thị nó
                    selectedValue = this.getAttribute('data-value');
                    selectedValueDisplay.textContent = 'Giá trị đã chọn: ' + selectedValue + (selectedValue == '1' ? ' (Không bao giờ)' : selectedValue == '5' ? ' (Rất thường xuyên)' : '');
                });
            });
        }

        setupRectangleOptions('A4');
        setupRectangleOptions('A7');
        setupRectangleOptions('A8');
        setupRectangleOptions('A9');
        setupRectangleOptions('A10');

        document.addEventListener('DOMContentLoaded', function () {
            $('.yearpicker').yearpicker({
                startYear: 2020,
                endYear: 2024
            });
        });

        document.getElementById('submitBtn').addEventListener('click', () => {


            if (selectedTrainees.length === 0) {
                alert('Vui lòng chọn ít nhất một thực tập sinh.');
            } else {
                console.log('Dữ liệu khảo sát:', {
                    A1: document.getElementById('A1').value,
                    A2: document.getElementById('A2').value,
                    A3: Array.from(document.querySelectorAll('#A3 input:checked')).map(el => el.value),
                    A4: document.getElementById('A4').value,
                    A5: selectedTrainees,
                    A6: Array.from(document.querySelectorAll('#A6 input:checked')).map(el => el.value),
                    A7: document.getElementById('A7').value,
                    A8: document.getElementById('A8').value,
                    A9: document.getElementById('A9').value,
                    A10: document.getElementById('A10').value,
                    B1: document.getElementById('B1').value,
                    B2: document.getElementById('B2').value,
                    B3: document.getElementById('B3').value,
                    B4: document.getElementById('B4').value
                });
                alert('Cảm ơn bạn đã hoàn thành khảo sát!');
            }
        });
    </script>

</body>

</html>